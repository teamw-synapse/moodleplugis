/**
 * Add a create new group modal to the page.
 *
 * @module     block_userdashboard/userdashboard
 * @class      userdashboard
 * @package    block_userdashboard
 * @copyright  2024 VGPL
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["local_rolemanagement/cardPaginate","jquery","core/str","core/templates","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/notification","core/yui"],function(a,e,s,r,t,o,d,n,l,c){return{load:function(){e(document).ready(function(){var s=e("#studentidvalue").val();s>0?(n.call([{methodname:"block_userdashboard_data_for_mydashboard",args:{tab:"mydashboard",userid:s}}])[0].done(function(a){r.render("block_userdashboard/mydashboard",a).then(function(a,s){e("#v-pills-tabContentcommon").html(a)}).fail(l.exception)}).fail(l.exception),e(document).on("click",".block_userdashboard .nav-link",function(){var t=e(this).attr("id");e("#"+t).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+t).addClass("active"));var o=t.split("-");if("v-pills-courses-tab"===t){e("#v-pills-tabContentcommon").html(""),e("#"+t).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+t).addClass("active"));var d={};d.targetID="manage_userdashboard_courses",d.perPage=3,d.cardClass="w_one",d.viewType="card",d.methodName="block_userdashboard_data_for_courses",d.templateName="block_userdashboard/course_cards";var c={};c.contextid=1,c.tab=o[2],c.userid=s;var m={},u={};u.targetID="manage_userdashboard_courses",u.options=JSON.stringify(d),u.dataoptions=JSON.stringify(c),u.filterdata=JSON.stringify(m),a.reload(d,c,m),e("#"+t).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+t).addClass("active"))}else if("v-pills-assesments-tab"===t){e("#"+t).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+t).addClass("active")),e("#v-pills-tabContentcommon").html("");var d={};d.targetID="manage_userdashboard_assign",d.perPage=6,d.cardClass="w_one",d.viewType="card",d.methodName="block_userdashboard_data_for_assesments",d.templateName="block_userdashboard/assesments";var c={};c.contextid=1,c.tab=o[2],c.userid=s;var m={},u={};u.targetID="manage_userdashboard_assign",u.options=JSON.stringify(d),u.dataoptions=JSON.stringify(c),u.filterdata=JSON.stringify(m),a.reload(d,c,m)}else if("v-pills-exams-tab"===t){e("#v-pills-tabContentcommon").html(""),e("#"+t).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+t).addClass("active"));var d={};d.targetID="manage_userdashboard_exam",d.perPage=6,d.cardClass="w_one",d.viewType="card",d.methodName="block_userdashboard_data_for_exams",d.templateName="block_userdashboard/exams";var c={};c.contextid=1,c.tab=o[2],c.userid=s;var m={},u={};u.targetID="manage_userdashboard_exam",u.options=JSON.stringify(d),u.dataoptions=JSON.stringify(c),u.filterdata=JSON.stringify(m),a.reload(d,c,m)}else if("v-pills-forums-tab"===t){e("#v-pills-tabContentcommon").html(""),e("#"+t).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+t).addClass("active"));var d={};d.targetID="manage_userdashboard_forum",d.perPage=6,d.cardClass="w_one",d.viewType="card",d.methodName="block_userdashboard_data_for_forums",d.templateName="block_userdashboard/forums";var c={};c.contextid=1,c.tab=o[2],c.userid=s;var m={},u={};u.targetID="manage_userdashboard_forum",u.options=JSON.stringify(d),u.dataoptions=JSON.stringify(c),u.filterdata=JSON.stringify(m),a.reload(d,c,m)}else if("reports"==o[2]){var h=e("#chartSelect :selected").val();h=h||"bar";var v=n.call([{methodname:"block_userdashboard_data_for_"+o[2],args:{tab:o[2],userid:s,courseid:0,graphval:h}}]),b="block_userdashboard/"+o[2];v[0].done(function(a){r.render(b,a).then(function(a,s){e("#v-pills-tabContentcommon").html(a),e("#manage_userdashboard_examid").html(""),e("#manage_userdashboard_assignid").html(""),e("#manage_userdashboard_forumid").html(""),e("#manage_userdashboard_coursesid").html(""),e("#coursesearch").css("display","none"),e("#forumsearch").css("display","none"),e("#examsearch").css("display","none"),e("#assesmentsearch").css("display","none")}).fail(l.exception)}).fail(l.exception)}else{var v=n.call([{methodname:"block_userdashboard_data_for_"+o[2],args:{tab:o[2],userid:s}}]),b="block_userdashboard/"+o[2];v[0].done(function(a){r.render(b,a).then(function(a,s){e("#v-pills-tabContentcommon").html(a),e("#manage_userdashboard_examid").html(""),e("#manage_userdashboard_assignid").html(""),e("#manage_userdashboard_forumid").html(""),e("#manage_userdashboard_coursesid").html(""),e("#coursesearch").css("display","none"),e("#forumsearch").css("display","none"),e("#examsearch").css("display","none"),e("#assesmentsearch").css("display","none")}).fail(l.exception)}).fail(l.exception)}})):e(document).on("change","#id_studentids",function(){var s=e("#id_studentids :selected").val();s>0?(r.render("block_userdashboard/maintabsnew",{userid:s}).then(function(a,s){e("#userdashboardcontent").html(a)}).fail(l.exception),n.call([{methodname:"block_userdashboard_data_for_mydashboard",args:{tab:"mydashboard",userid:s}}])[0].done(function(a){r.render("block_userdashboard/mydashboard",a).then(function(a,s){e("#v-pills-tabContentcommon").html(a)}).fail(l.exception)}).fail(l.exception),e(document).on("click",".block_userdashboard .nav-link",function(){var s=e(this).attr("id"),t=e("#studentidvalue").val();e("#"+s).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+s).addClass("active"));var o=s.split("-");if("v-pills-courses-tab"===s){var d={userid:t};r.render("block_userdashboard/maintabsnew",d).then(function(a,r){e("#userdashboardcontent").html(a),e("#coursesearch").css("display","block"),e("#"+s).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+s).addClass("active"))}).fail(l.exception);var c={};c.targetID="manage_userdashboard_courses",c.perPage=3,c.cardClass="w_one",c.viewType="card",c.methodName="block_userdashboard_data_for_courses",c.templateName="block_userdashboard/course_cards";var m={};m.contextid=1,m.tab=o[2],m.userid=t;var u={},h={};h.targetID="manage_userdashboard_courses",h.options=JSON.stringify(c),h.dataoptions=JSON.stringify(m),h.filterdata=JSON.stringify(u),a.reload(c,m,u)}else if("v-pills-assesments-tab"===s){var d={userid:t};r.render("block_userdashboard/maintabsnew",d).then(function(a,r){e("#userdashboardcontent").html(a),e("#assesmentsearch").css("display","block"),e("#"+s).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+s).addClass("active"))}).fail(l.exception);var c={};c.targetID="manage_userdashboard_assign",c.perPage=6,c.cardClass="w_one",c.viewType="card",c.methodName="block_userdashboard_data_for_assesments",c.templateName="block_userdashboard/assesments";var m={};m.contextid=1,m.tab=o[2],m.userid=t;var u={},h={};h.targetID="manage_userdashboard_assign",h.options=JSON.stringify(c),h.dataoptions=JSON.stringify(m),h.filterdata=JSON.stringify(u),a.reload(c,m,u)}else if("v-pills-exams-tab"===s){var d={userid:t};r.render("block_userdashboard/maintabsnew",d).then(function(a,r){e("#userdashboardcontent").html(a),e("#examsearch").css("display","block"),e("#"+s).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+s).addClass("active"))}).fail(l.exception);var c={};c.targetID="manage_userdashboard_exam",c.perPage=6,c.cardClass="w_one",c.viewType="card",c.methodName="block_userdashboard_data_for_exams",c.templateName="block_userdashboard/exams";var m={};m.contextid=1,m.tab=o[2],m.userid=t;var u={},h={};h.targetID="manage_userdashboard_exam",h.options=JSON.stringify(c),h.dataoptions=JSON.stringify(m),h.filterdata=JSON.stringify(u),a.reload(c,m,u)}else if("v-pills-forums-tab"===s){var d={userid:t};r.render("block_userdashboard/maintabsnew",d).then(function(a,r){e("#userdashboardcontent").html(a),e("#forumsearch").css("display","block"),e("#"+s).hasClass("active")||(e(".nav-link.active").removeClass("active"),e("#"+s).addClass("active"))}).fail(l.exception);var c={};c.targetID="manage_userdashboard_forum",c.perPage=6,c.cardClass="w_one",c.viewType="card",c.methodName="block_userdashboard_data_for_forums",c.templateName="block_userdashboard/forums";var m={};m.contextid=1,m.tab=o[2],m.userid=t;var u={},h={};h.targetID="manage_userdashboard_forum",h.options=JSON.stringify(c),h.dataoptions=JSON.stringify(m),h.filterdata=JSON.stringify(u),a.reload(c,m,u)}else if("reports"==o[2]){var v=e("#chartSelect :selected").val();v=v||"bar";var b=n.call([{methodname:"block_userdashboard_data_for_"+o[2],args:{tab:o[2],userid:t,courseid:0,graphval:v}}]),f="block_userdashboard/"+o[2];b[0].done(function(a){r.render(f,a).then(function(a,s){e("#v-pills-tabContentcommon").html(a),e("#manage_userdashboard_examid").html(""),e("#manage_userdashboard_assignid").html(""),e("#manage_userdashboard_forumid").html(""),e("#manage_userdashboard_coursesid").html(""),e("#coursesearch").css("display","none"),e("#forumsearch").css("display","none"),e("#examsearch").css("display","none"),e("#assesmentsearch").css("display","none")}).fail(l.exception)}).fail(l.exception)}else{var b=n.call([{methodname:"block_userdashboard_data_for_"+o[2],args:{tab:o[2],userid:t}}]),f="block_userdashboard/"+o[2];b[0].done(function(a){r.render(f,a).then(function(a,s){e("#v-pills-tabContentcommon").html(a),e("#manage_userdashboard_examid").html(""),e("#manage_userdashboard_assignid").html(""),e("#manage_userdashboard_forumid").html(""),e("#manage_userdashboard_coursesid").html(""),e("#coursesearch").css("display","none"),e("#forumsearch").css("display","none"),e("#examsearch").css("display","none"),e("#assesmentsearch").css("display","none")}).fail(l.exception)}).fail(l.exception)}})):e("#userdashboardcontent").html("")}),e(document).on("change","#unitSelect",function(){var a,s=e("#unitSelect :selected").val(),t=e("#chartSelect :selected").val();t=t||"bar";var o=e("#studentidvalue").val();if(!o)var o=e("#id_studentids :selected").val();n.call([{methodname:"block_userdashboard_data_for_reports",args:{tab:"reports",userid:o,courseid:s,graphval:t}}])[0].done(function(a){r.render("block_userdashboard/reports",a).then(function(a,s){e("#v-pills-tabContentcommon").html(a)}).fail(l.exception)}).fail(l.exception)}),e(document).on("change","#chartSelect",function(){var a,s=e("#unitSelect :selected").val(),t=e("#chartSelect :selected").val();t=t||"bar";var o=e("#studentidvalue").val();if(!o)var o=e("#id_studentids :selected").val();n.call([{methodname:"block_userdashboard_data_for_reports",args:{tab:"reports",userid:o,courseid:s,graphval:t}}])[0].done(function(a){r.render("block_userdashboard/reports",a).then(function(a,s){e("#v-pills-tabContentcommon").html(a)}).fail(l.exception)}).fail(l.exception)}),e("#fitem_id_studentids").on("keyup",function(){var a=e("#fitem_id_studentids").find(".form-control").first().val();a.length>3&&n.call([{methodname:"block_userdashboard_search_for_students",args:{search:a}}])[0].done(function(a){for(i=0,studentselOpts=" <option value='0'>Select Student Name</option>",selopt="";i<a.users.length;i++){var s=a.users[i].studentid,r=a.users[i].studentname;selopt+='<li role="option" data-value="'+s+'" aria-selected="false" >'+r+"</li>",studentselOpts+="<option value='"+s+"'>"+r+"</option>"}e("#id_studentids").children().remove().end().append(studentselOpts),e("#fitem_id_studentids .form-autocomplete-suggestions").children().remove().end().append(selopt),e("#fitem_id_studentids .form-autocomplete-suggestions").css("display","block")}).fail(function(a){})})})},coursesearch:function(s){var r=e("#studentidvalue").val(),t=e("#coursesearch").val();if(r>0){var o={};o.targetID="manage_userdashboard_courses",o.perPage=3,o.cardClass="w_one",o.viewType="card",o.methodName="block_userdashboard_data_for_courses",o.templateName="block_userdashboard/course_cards";var d={};d.contextid=1,d.tab="courses",d.userid=r,d.coursesearch=t;var n={},l={};l.targetID="manage_userdashboard_courses",l.options=JSON.stringify(o),l.dataoptions=JSON.stringify(d),l.filterdata=JSON.stringify(n),a.reload(o,d,n)}},assesmentsearch:function(s){var r=e("#studentidvalue").val(),t=e("#assesmentsearch").val();if(r>0){var o={};o.targetID="manage_userdashboard_assign",o.perPage=6,o.cardClass="w_one",o.viewType="card",o.methodName="block_userdashboard_data_for_assesments",o.templateName="block_userdashboard/assesments";var d={};d.contextid=1,d.tab="courses",d.userid=r,d.assesmentsearch=t;var n={},l={};l.targetID="manage_userdashboard_assign",l.options=JSON.stringify(o),l.dataoptions=JSON.stringify(d),l.filterdata=JSON.stringify(n),a.reload(o,d,n)}},examsearch:function(s){var r=e("#studentidvalue").val(),t=e("#examsearch").val();if(r>0){var o={};o.targetID="manage_userdashboard_exam",o.perPage=6,o.cardClass="w_one",o.viewType="card",o.methodName="block_userdashboard_data_for_exams",o.templateName="block_userdashboard/exams";var d={};d.contextid=1,d.tab="courses",d.userid=r,d.examsearch=t;var n={},l={};l.targetID="manage_userdashboard_exam",l.options=JSON.stringify(o),l.dataoptions=JSON.stringify(d),l.filterdata=JSON.stringify(n),a.reload(o,d,n)}},forumsearch:function(s){var r=e("#studentidvalue").val(),t=e("#forumsearch").val();if(r>0){var o={};o.targetID="manage_userdashboard_forum",o.perPage=6,o.cardClass="w_one",o.viewType="card",o.methodName="block_userdashboard_data_for_forums",o.templateName="block_userdashboard/forums";var d={};d.contextid=1,d.tab="forums",d.userid=r,d.forumsearch=t;var n={},l={};l.targetID="manage_userdashboard_forum",l.options=JSON.stringify(o),l.dataoptions=JSON.stringify(d),l.filterdata=JSON.stringify(n),a.reload(o,d,n)}}}});