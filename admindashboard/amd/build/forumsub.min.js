/**
 * Add a create new group modal to the page.
 *
 * @module     local_studentdashboard/register
 * @class      register
 * @package    local_studentdashboard
 * @copyright  2017 Shivani
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["local_rolemanagement/cardPaginate","jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/templates","core/ajax","core/yui"],function(t,o,e,i,n,r,a,s,d){var c=function(t){this.forumid=t.forumid,this.discussionid=t.discussionid,this.courseid=t.courseid,this.userid=t.userid,this.init(t)};return c.prototype.modal=null,c.prototype.contextid=-1,c.prototype.init=function(t){var n=this;return e.get_string("forum_submissions","block_admindashboard").then((function(t){return i.create({type:i.types.DEFAULT,title:t,body:n.getBody(),footer:this.getFooter()})}).bind(n)).then((function(t){return n.modal=t,n.modal.setLarge(),this.modal.getFooter().find('[data-action="cancel"]').on("click",function(){t.destroy()}),this.modal.getFooter().find('[data-action="skip"]').on("click",function(){n.args.form_status=n.args.form_status+1;var o=n.getBody();t.setBody(o)}),this.modal.show(),this.modal.getRoot().animate({right:"0%"},500),o(".close").click(function(){t.destroy()}),this.modal}).bind(this))},c.prototype.getBody=function(){return(params={}).forumid=this.forumid,params.discussionid=this.discussionid,params.courseid=this.courseid,params.userid=this.userid,r.loadFragment("block_admindashboard","forum_sub",5,params)},c.prototype.getFooter=function(){return'<button type="button" class="btn btn-secondary" data-action="cancel">Cancel</button>'},{init:function(t){return new c(t)},search:function(e){var i=o("#forumsubsearch").val(),n={};n.targetID="manage_forum_sub",n.perPage=5,n.cardClass="w_one",n.viewType="card",n.methodName="block_admin_forum_sub",n.templateName="block_admindashboard/forumgradedata";var r={};r.userid=e.userid,r.contextid=1,r.courseid=e.courseid,r.discussionid=e.discussionid,r.forumid=e.forumid,r.search=i;var a={},s={};s.targetID="manage_forum_sub",s.options=JSON.stringify(n),s.dataoptions=JSON.stringify(r),s.filterdata=JSON.stringify(a),t.reload(n,r,a)},load:function(){},deleteConfirm:function(t){return e.get_strings([{key:"confirm"},{key:"deleteconfirm",component:"local_studentdashboard",param:t},{key:"deleteallconfirm",component:"local_studentdashboard"},{key:"delete"}]).then((function(o){i.create({title:o[0],type:i.types.SAVE_CANCEL,body:o[1]}).done((function(e){this.modal=e,e.setSaveButtonText(o[3]),e.getRoot().on(n.yes,(function(o){o.preventDefault(),t.confirm=!0,console.log(t);var e={};e.id=t.id,e.contextid=t.contextid,s.call([{methodname:"local_studentdashboard_delete_employee",args:e}])[0].done(function(t){window.location.href=window.location.href}).fail(function(t){console.log(t)})}).bind(this)),e.show()}).bind(this))}).bind(this))}}});